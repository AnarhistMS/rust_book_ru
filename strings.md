% Строки

Строки являются важным понятием для любого ведущего программиста. Система
обработки строк в Rust немного отличается от других языков, в связи с его
фокусировкой на системный уровень. Всякий раз, когда вы имеете дело со
структурой данных с переменным размером, все может стать слишком запутанным, и
строки как раз являются структурой данных с переменным размером. Кроме того,
работа со строками в Rust также отличается и от некоторых системных языков,
таких как C.

Давайте разбираться в деталях. *string* - это последовательность скалярных
значений юникод, закодированных в виде потока UTF-8 байт. Все строки должны быть
гарантированно валидными UTF-8 последовательностями. Кроме того, строки не
оканчиваются нулем и могут содержать нулевые байты.

В Rust есть два основных типа строк: `&str` и `String`.

Первый тип строк - `&str`. Это произносится как 'строковый срез (слайс)'.
Строковые литералы имеют тип `&str`:

```{rust}
let string = "Hello there."; // string: &str
```

Эта строка выделяется статически, что означает, что она сохраняется в нашей
скомпилированной программе и существует в течение всего периода ее выполнения.
`string` привязка представляет собой ссылку на эту статически размещенную
строку. Строковые срезы имеют фиксированный размер и не могут быть изменены.

`String` же, напротив, выделяется в куче. Эта строка расширяема, а также она
гарантированно является UTF-8 последовательностью. `String` обычно создается
путем преобразования из строкового среза с использованием метода `to_string`.

```{rust}
let mut s = "Hello".to_string(); // mut s: String
println!("{}", s);

s.push_str(", world.");
println!("{}", s);
```

`String` преобразуются в `&str` с помощью `&`:

```
fn takes_slice(slice: &str) {
    println!("Got: {}", slice);
}

fn main() {
    let s = "Hello".to_string();
    takes_slice(&s);
}
```

Представление `String` как `&str` является дешевой операцией, но преобразование
`&str` в `String` предполагает выделение памяти. Нет причин делать это, если в
этом нет необходимости!

Это основы работы со строками в Rust! Они, вероятно, немного сложнее, чем вы
привыкли, если вы пришли из скриптового языка, но когда низкоуровневые детали
имеют значение, они действительно имеют значение. Просто помните, что `String`
выделяют память и контролируют свои данные, а `&str` является ссылкой на другую
строку, и будет все в порядке.
